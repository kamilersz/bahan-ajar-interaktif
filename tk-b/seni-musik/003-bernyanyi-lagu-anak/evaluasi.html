<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evaluasi Bernyanyi - TK-B Seni Musik</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3/dist/cdn.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&family=Fredoka+One&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Comic Neue', cursive; }
        .title-font { font-family: 'Fredoka One', cursive; }
        .wiggle { animation: wiggle 1s ease-in-out infinite; }
        @keyframes wiggle { 0%, 100% { transform: rotate(-3deg); } 50% { transform: rotate(3deg); } }
        .option-btn { transition: all 0.3s ease; }
        .option-btn:hover:not(:disabled) { transform: scale(1.05); }
    </style>
</head>
<body class="bg-gradient-to-br from-green-100 via-emerald-100 to-teal-100 min-h-screen" x-data="evaluationQuiz()">
    <header class="bg-gradient-to-r from-green-500 via-emerald-500 to-teal-500 text-white py-6 shadow-lg">
        <div class="container mx-auto px-4 text-center">
            <h1 class="title-font text-4xl md:text-5xl mb-2 wiggle inline-block">ğŸ“ Evaluasi Bernyanyi ğŸ“</h1>
            <p class="text-xl" x-show="!quizCompleted">Ayo Tunjukan Kemampuanmu!</p>
            <p class="text-xl" x-show="quizCompleted">Selesai! Bagus sekali!</p>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8 max-w-4xl">
        <div x-show="!quizCompleted">
            <div class="bg-white rounded-3xl shadow-xl p-6 mb-8 border-4 border-green-300">
                <div class="flex justify-between items-center mb-3">
                    <span class="title-font text-xl text-green-600">Progress</span>
                    <span class="title-font text-xl text-green-600" x-text="`${currentQuestion + 1} dari ${questions.length}`"></span>
                </div>
                <div class="w-full bg-green-200 rounded-full h-4">
                    <div class="bg-gradient-to-r from-green-400 to-emerald-400 h-4 rounded-full transition-all duration-500"
                         :style="`width: ${((currentQuestion + 1) / questions.length) * 100}%`"></div>
                </div>
            </div>

            <div class="bg-white rounded-3xl shadow-xl p-8 mb-8 border-4 border-emerald-300">
                <div class="text-center mb-8">
                    <div class="text-8xl mb-4" x-text="questions[currentQuestion].emoji"></div>
                    <h2 class="title-font text-3xl text-gray-800 mb-2">Pertanyaan <span x-text="currentQuestion + 1"></span></h2>
                    <p class="text-2xl text-gray-700" x-text="questions[currentQuestion].question"></p>
                </div>

                <div class="grid grid-cols-1 gap-4">
                    <template x-for="(option, index) in questions[currentQuestion].options" :key="index">
                        <button @click="selectAnswer(index)"
                                :disabled="quizCompleted"
                                class="option-btn p-6 rounded-2xl title-font text-xl shadow-lg text-left"
                                :class="answers[currentQuestion] === index ? 'bg-emerald-500 text-white' : 'bg-gray-100 hover:bg-gray-200 text-gray-700'">
                            <span class="font-bold mr-2" x-text="String.fromCharCode(65 + index) + '.'"></span>
                            <span x-text="option"></span>
                        </button>
                    </template>
                </div>
            </div>

            <div class="flex justify-between gap-4">
                <button x-show="currentQuestion > 0" @click="prevQuestion()"
                        class="flex-1 bg-gradient-to-r from-gray-400 to-gray-500 text-white title-font text-xl px-6 py-4 rounded-full shadow-lg">
                    â¬…ï¸ Sebelumnya
                </button>
                <button x-show="currentQuestion < questions.length - 1" @click="nextQuestion()"
                        :disabled="answers[currentQuestion] === undefined"
                        class="flex-1 bg-gradient-to-r from-blue-400 to-blue-600 text-white title-font text-xl px-6 py-4 rounded-full shadow-lg disabled:opacity-50">
                    Lanjut â¡ï¸
                </button>
                <button x-show="currentQuestion === questions.length - 1 && !allAnswered"
                        :disabled="answers[currentQuestion] === undefined"
                        @click="submitQuiz()"
                        class="flex-1 bg-gradient-to-r from-yellow-400 to-orange-500 text-white title-font text-xl px-6 py-4 rounded-full shadow-lg disabled:opacity-50">
                    ğŸ‘‡ Cek Jawaban
                </button>
            </div>
        </div>

        <div x-show="quizCompleted" class="bg-gradient-to-br from-yellow-100 to-orange-100 rounded-3xl shadow-xl p-8 mb-8 border-4 border-yellow-400">
            <div class="text-center">
                <div class="text-9xl mb-4" x-text="scoreEmoji"></div>
                <h2 class="title-font text-4xl text-yellow-700 mb-4">Hasil Evaluasi</h2>
                <div class="bg-white rounded-2xl p-6 mb-6">
                    <p class="title-font text-5xl text-emerald-600 mb-2">
                        <span x-text="score"></span> / <span x-text="totalQuestions"></span>
                    </p>
                    <p class="text-2xl text-gray-700">Jawaban Benar</p>
                </div>
                <div class="bg-gradient-to-r from-green-100 to-emerald-100 rounded-2xl p-6 mb-6">
                    <p class="title-font text-3xl text-green-700 mb-2" x-text="grade"></p>
                    <p class="text-xl text-gray-700" x-text="message"></p>
                </div>
                <div class="space-y-4">
                    <a href="rangkuman.html" class="inline-block bg-gradient-to-r from-green-400 to-emerald-600 text-white title-font text-2xl px-8 py-4 rounded-full shadow-lg">
                        â¡ï¸ Lihat Rangkuman
                    </a>
                    <br>
                    <button @click="restartQuiz()" class="inline-block bg-gradient-to-r from-green-400 to-teal-400 text-white title-font text-xl px-6 py-3 rounded-full shadow-lg">
                        ğŸ”„ Ulangi Evaluasi
                    </button>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-gradient-to-r from-green-500 via-emerald-500 to-teal-500 text-white py-4 mt-8">
        <div class="container mx-auto px-4 text-center">
            <p class="text-lg">Â© 2026 Bahan Ajar Interaktif - TK-B Seni Musik</p>
        </div>
    </footer>

    <script>
        function evaluationQuiz() {
            return {
                currentQuestion: 0,
                answers: {},
                quizCompleted: false,
                score: 0,
                totalQuestions: 0,
                allAnswered: false,
                questions: [
                    { emoji: 'ğŸˆ', question: 'Lagu "Balonku" menceritakan tentang...', correct: 2, options: ['Bintang di langit', 'Kebun bunga', 'Balon yang meletus', 'Pisang goreng'] },
                    { emoji: 'â­', question: 'Lengkapkan lirik: "Bintang kecil di langit yang..."', correct: 0, options: ['Tinggi', 'Rendah', 'Jauh', 'Dekat'] },
                    { emoji: 'ğŸŒ»', question: '"Lihat kebunku, penuh dengan..."', correct: 1, options: ['Buah-buahan', 'Bunga', 'Sayur-sayuran', 'Pohon-pohon'] },
                    { emoji: 'ğŸŒ', question: 'Lagu "Ampar-Ampar Pisang" berasal dari daerah...', correct: 3, options: ['Jawa', 'Sumatera', 'Sulawesi', 'Kalimantan'] },
                    { emoji: 'ğŸ¤', question: 'Agar suara bagus saat bernyanyi, kita harus...', correct: 0, options: ['Bernapas dengan benar', 'Berteriak keras', 'Menutup mulut', 'Tertidur'] },
                    { emoji: 'ğŸ˜Š', question: 'Saat bernyanyi, sebaiknya kita...', correct: 2, options: ['Sedih', 'Marah', 'Senyum', 'Menangis'] },
                    { emoji: 'ğŸµ', question: 'Urutan warna balon dalam lagu "Balonku" adalah...', correct: 1, options: ['Merah, biru, hijau', 'Hijau, kuning, kelabu', 'Merah, putih, kuning', 'Pink, biru, ungu'] },
                    { emoji: 'ğŸ¶', question: 'Manakah yang BUKAN lagu anak Indonesia?', correct: 2, options: ['Balonku', 'Bintang Kecil', 'Twinkle Twinkle', 'Lihat Kebunku'] }
                ],
                init() { this.totalQuestions = this.questions.length; },
                selectAnswer(optionIndex) { this.answers[this.currentQuestion] = optionIndex; this.checkAllAnswered(); },
                checkAllAnswered() { this.allAnswered = Object.keys(this.answers).length === this.questions.length; },
                prevQuestion() { if (this.currentQuestion > 0) this.currentQuestion--; },
                nextQuestion() {
                    if (this.answers[this.currentQuestion] === undefined) return;
                    if (this.currentQuestion < this.questions.length - 1) { this.currentQuestion++; } else if (this.allAnswered) { this.submitQuiz(); }
                },
                submitQuiz() {
                    this.checkAllAnswered();
                    if (!this.allAnswered) return;
                    this.score = 0;
                    this.questions.forEach((q, i) => { if (this.answers[i] === q.correct) this.score++; });
                    this.quizCompleted = true;
                },
                restartQuiz() { this.currentQuestion = 0; this.answers = {}; this.quizCompleted = false; this.score = 0; this.allAnswered = false; },
                get scoreEmoji() { const p = this.score / this.totalQuestions; if (p >= 0.9) return 'ğŸ†'; if (p >= 0.7) return 'ğŸŒŸ'; if (p >= 0.5) return 'ğŸ‘'; return 'ğŸ’ª'; },
                get grade() { const p = this.score / this.totalQuestions; if (p >= 0.9) return 'SANGAT BAGUS!'; if (p >= 0.7) return 'BAGUS SEKALI!'; if (p >= 0.5) return 'CUKUP BAGUS!'; return 'TERUS BERLATIH!'; },
                get message() {
                    const p = this.score / this.totalQuestions;
                    if (p >= 0.9) return 'Luar biasa! Adik-adik jago sekali bernyanyi! ğŸ‰';
                    if (p >= 0.7) return 'Hebat! Adik-adik sudah hafal banyak lagu! â­';
                    if (p >= 0.5) return 'Bagus! Terus belajar dan bernyanyi ya! ğŸ’ª';
                    return 'Jangan menyerah! Coba pelajari lagi lagu-lagunya! ğŸµ';
                }
            }
        }
    </script>
</body>
</html>
