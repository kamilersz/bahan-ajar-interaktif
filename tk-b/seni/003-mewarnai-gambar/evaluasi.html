<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evaluasi Mewarnai - TK-B Seni</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3/dist/cdn.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&family=Fredoka+One&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Comic Neue', cursive; }
        .title-font { font-family: 'Fredoka One', cursive; }
        .wiggle { animation: wiggle 1s ease-in-out infinite; }
        @keyframes wiggle { 0%, 100% { transform: rotate(-3deg); } 50% { transform: rotate(3deg); } }
        .confetti { position: fixed; width: 15px; height: 15px; animation: confetti-fall 3s ease-out forwards; }
        @keyframes confetti-fall { 0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; } 100% { transform: translateY(100vh) rotate(720deg); opacity: 0; } }
        .option-btn { transition: all 0.3s ease; }
        .option-btn:hover:not(:disabled) { transform: scale(1.05); }
        .option-btn.selected { ring: 4px solid #3b82f6; transform: scale(1.05); }
        .option-btn.correct { background: linear-gradient(to bottom right, #4ade80, #22c55e) !important; }
        .option-btn.incorrect { background: linear-gradient(to bottom right, #f87171, #ef4444) !important; }
    </style>
</head>
<body class="bg-gradient-to-br from-pink-100 via-purple-100 to-indigo-100 min-h-screen" x-data="evaluationQuiz()">
    <header class="bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 text-white py-6 shadow-lg">
        <div class="container mx-auto px-4 text-center">
            <h1 class="title-font text-4xl md:text-5xl mb-2 wiggle inline-block">üìù Evaluasi Mewarnai üìù</h1>
            <p class="text-xl" x-show="!quizCompleted">Ayo Tunjukan Kemampuanmu!</p>
            <p class="text-xl" x-show="quizCompleted">Selesai! Bagus sekali!</p>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8 max-w-4xl">
        <div x-show="!quizCompleted">
            <div class="bg-white rounded-3xl shadow-xl p-6 mb-8 border-4 border-pink-300">
                <div class="flex justify-between items-center mb-3">
                    <span class="title-font text-xl text-pink-600">Progress</span>
                    <span class="title-font text-xl text-pink-600" x-text="`${currentQuestion + 1} dari ${questions.length}`"></span>
                </div>
                <div class="w-full bg-pink-200 rounded-full h-4">
                    <div class="bg-gradient-to-r from-pink-400 to-purple-400 h-4 rounded-full transition-all duration-500"
                         :style="`width: ${((currentQuestion + 1) / questions.length) * 100}%`"></div>
                </div>
            </div>

            <div class="bg-white rounded-3xl shadow-xl p-8 mb-8 border-4 border-purple-300">
                <div class="text-center mb-8">
                    <div class="text-8xl mb-4" x-text="questions[currentQuestion].emoji"></div>
                    <h2 class="title-font text-3xl text-gray-800 mb-2">Pertanyaan <span x-text="currentQuestion + 1"></span></h2>
                    <p class="text-2xl text-gray-700" x-text="questions[currentQuestion].question"></p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <template x-for="(option, index) in questions[currentQuestion].options" :key="index">
                        <button @click="selectAnswer(index)"
                                :disabled="quizCompleted"
                                class="option-btn p-6 rounded-2xl text-white title-font text-2xl shadow-lg"
                                :class="[
                                    option.bgClass,
                                    { 'selected': answers[currentQuestion] === index }
                                ]">
                            <span x-text="option.label"></span>
                        </button>
                    </template>
                </div>
            </div>

            <div class="flex justify-between gap-4">
                <button x-show="currentQuestion > 0" @click="prevQuestion()"
                        class="flex-1 bg-gradient-to-r from-gray-400 to-gray-500 text-white title-font text-xl px-6 py-4 rounded-full shadow-lg">
                    ‚¨ÖÔ∏è Sebelumnya
                </button>
                <button x-show="currentQuestion < questions.length - 1" @click="nextQuestion()"
                        :disabled="answers[currentQuestion] === undefined"
                        class="flex-1 bg-gradient-to-r from-blue-400 to-blue-600 text-white title-font text-xl px-6 py-4 rounded-full shadow-lg disabled:opacity-50">
                    Lanjut ‚û°Ô∏è
                </button>
                <button x-show="currentQuestion === questions.length - 1 && !allAnswered"
                        :disabled="answers[currentQuestion] === undefined"
                        class="flex-1 bg-gradient-to-r from-yellow-400 to-orange-500 text-white title-font text-xl px-6 py-4 rounded-full shadow-lg disabled:opacity-50">
                    üëá Cek Jawaban
                </button>
            </div>

            <div x-show="showWarning" class="mt-6 bg-red-100 border-4 border-red-400 rounded-2xl p-6 text-center">
                <p class="text-xl text-red-700">‚ö†Ô∏è Jawab semua pertanyaan dulu ya!</p>
            </div>
        </div>

        <div x-show="quizCompleted" class="bg-gradient-to-br from-yellow-100 to-orange-100 rounded-3xl shadow-xl p-8 mb-8 border-4 border-yellow-400">
            <div class="text-center">
                <div class="text-9xl mb-4" x-text="scoreEmoji"></div>
                <h2 class="title-font text-4xl text-yellow-700 mb-4">Hasil Evaluasi</h2>
                <div class="bg-white rounded-2xl p-6 mb-6">
                    <p class="title-font text-5xl text-purple-600 mb-2">
                        <span x-text="score"></span> / <span x-text="totalQuestions"></span>
                    </p>
                    <p class="text-2xl text-gray-700">Jawaban Benar</p>
                </div>
                <div class="bg-gradient-to-r from-purple-100 to-pink-100 rounded-2xl p-6 mb-6">
                    <p class="title-font text-3xl text-purple-700 mb-2" x-text="grade"></p>
                    <p class="text-xl text-gray-700" x-text="message"></p>
                </div>
                <div class="space-y-4">
                    <a href="rangkuman.html" class="inline-block bg-gradient-to-r from-green-400 to-green-600 text-white title-font text-2xl px-8 py-4 rounded-full shadow-lg">
                        ‚û°Ô∏è Lihat Rangkuman
                    </a>
                    <br>
                    <button @click="restartQuiz()" class="inline-block bg-gradient-to-r from-purple-400 to-pink-400 text-white title-font text-xl px-6 py-3 rounded-full shadow-lg">
                        üîÑ Ulangi Evaluasi
                    </button>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 text-white py-4 mt-8">
        <div class="container mx-auto px-4 text-center">
            <p class="text-lg">¬© 2024 Bahan Ajar Interaktif - TK-B Seni</p>
        </div>
    </footer>

    <script>
        function evaluationQuiz() {
            return {
                currentQuestion: 0,
                answers: {},
                quizCompleted: false,
                showWarning: false,
                score: 0,
                totalQuestions: 0,
                allAnswered: false,
                questions: [
                    { emoji: 'üå≥', question: 'Warna apa yang cocok untuk batang pohon?', correct: 2, options: [
                        { label: 'HIJAU', bgClass: 'bg-green-500' }, { label: 'KUNING', bgClass: 'bg-yellow-500' }, { label: 'COKLAT', bgClass: 'bg-amber-700' }, { label: 'ABU', bgClass: 'bg-gray-500' }
                    ]},
                    { emoji: 'üå∏', question: 'Warna apa yang cocok untuk bunga?', correct: 1, options: [
                        { label: 'BIRU', bgClass: 'bg-blue-500' }, { label: 'PINK/MERAH', bgClass: 'bg-pink-500' }, { label: 'COKLAT', bgClass: 'bg-amber-700' }, { label: 'ABU', bgClass: 'bg-gray-500' }
                    ]},
                    { emoji: 'üè†', question: 'Warna apa yang cocok untuk atap rumah?', correct: 0, options: [
                        { label: 'MERAH', bgClass: 'bg-red-500' }, { label: 'BIRU', bgClass: 'bg-blue-500' }, { label: 'PUTIH', bgClass: 'bg-gray-100 text-gray-700' }, { label: 'UNGU', bgClass: 'bg-purple-500' }
                    ]},
                    { emoji: 'üåû', question: 'Warna apa yang cocok untuk matahari?', correct: 1, options: [
                        { label: 'BIRU', bgClass: 'bg-blue-500' }, { label: 'KUNING', bgClass: 'bg-yellow-500' }, { label: 'HIJAU', bgClass: 'bg-green-500' }, { label: 'MERAH', bgClass: 'bg-red-500' }
                    ]},
                    { emoji: 'üåä', question: 'Warna apa yang cocok untuk laut?', correct: 2, options: [
                        { label: 'KUNING', bgClass: 'bg-yellow-500' }, { label: 'HIJAU', bgClass: 'bg-green-500' }, { label: 'BIRU', bgClass: 'bg-blue-500' }, { label: 'MERAH', bgClass: 'bg-red-500' }
                    ]},
                    { emoji: 'ü¶ã', question: 'Warna apa yang sering ada pada kupu-kupu?', correct: 0, options: [
                        { label: 'WARNA-WARNI', bgClass: 'bg-gradient-to-r from-pink-400 via-purple-400 to-blue-400' }, { label: 'COKLAT', bgClass: 'bg-amber-700' }, { label: 'ABU', bgClass: 'bg-gray-500' }, { label: 'HITAM', bgClass: 'bg-gray-900' }
                    ]},
                    { emoji: 'üöó', question: 'Warna mobil yang BUKAN warna mobil?', correct: 3, options: [
                        { label: 'MERAH', bgClass: 'bg-red-500' }, { label: 'BIRU', bgClass: 'bg-blue-500' }, { label: 'PUTIH', bgClass: 'bg-gray-100 text-gray-700' }, { label: 'TRANSPARAN', bgClass: 'bg-gray-200 text-gray-700' }
                    ]},
                    { emoji: 'üåà', question: 'Pelangi ada berapa warna?', correct: 1, options: [
                        { label: '5 WARNA', bgClass: 'bg-gradient-to-r from-red-400 via-yellow-400 to-blue-400' }, { label: '7 WARNA', bgClass: 'bg-gradient-to-r from-red-400 via-yellow-400 via-green-400 via-blue-400 to-purple-400' }, { label: '10 WARNA', bgClass: 'bg-gradient-to-r from-pink-400 via-purple-400 to-indigo-400' }, { label: '3 WARNA', bgClass: 'bg-gradient-to-r from-blue-300 via-cyan-300 to-teal-300' }
                    ]}
                ],
                init() { this.totalQuestions = this.questions.length; },
                selectAnswer(optionIndex) { this.answers[this.currentQuestion] = optionIndex; this.checkAllAnswered(); },
                checkAllAnswered() { this.allAnswered = Object.keys(this.answers).length === this.questions.length; },
                prevQuestion() { if (this.currentQuestion > 0) this.currentQuestion--; },
                nextQuestion() {
                    if (this.answers[this.currentQuestion] === undefined) { this.showWarning = true; setTimeout(() => this.showWarning = false, 2000); return; }
                    if (this.currentQuestion < this.questions.length - 1) { this.currentQuestion++; } else if (this.allAnswered) { this.submitQuiz(); }
                },
                submitQuiz() {
                    this.checkAllAnswered();
                    if (!this.allAnswered) { this.showWarning = true; setTimeout(() => this.showWarning = false, 2000); return; }
                    this.score = 0;
                    this.questions.forEach((q, i) => { if (this.answers[i] === q.correct) this.score++; });
                    this.quizCompleted = true;
                    if (this.score >= this.totalQuestions * 0.8) this.createConfetti();
                },
                restartQuiz() { this.currentQuestion = 0; this.answers = {}; this.quizCompleted = false; this.score = 0; this.allAnswered = false; this.showWarning = false; },
                get scoreEmoji() { const p = this.score / this.totalQuestions; if (p >= 0.9) return 'üèÜ'; if (p >= 0.7) return 'üåü'; if (p >= 0.5) return 'üëç'; return 'üí™'; },
                get grade() { const p = this.score / this.totalQuestions; if (p >= 0.9) return 'SANGAT BAGUS!'; if (p >= 0.7) return 'BAGUS SEKALI!'; if (p >= 0.5) return 'CUKUP BAGUS!'; return 'TERUS BERLATIH!'; },
                get message() {
                    const p = this.score / this.totalQuestions;
                    if (p >= 0.9) return 'Luar biasa! Adik-adik jago sekali mewarnai! üéâ';
                    if (p >= 0.7) return 'Hebat! Adik-adik sudah paham banyak tentang warna! ‚≠ê';
                    if (p >= 0.5) return 'Bagus! Terus belajar ya, pasti bisa lebih baik! üí™';
                    return 'Jangan menyerah! Coba pelajari lagi materinya! üé®';
                },
                createConfetti() {
                    const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
                    for (let i = 0; i < 50; i++) {
                        const confetti = document.createElement('div');
                        confetti.className = 'confetti';
                        confetti.style.left = Math.random() * 100 + 'vw';
                        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                        confetti.style.animationDelay = Math.random() * 2 + 's';
                        document.body.appendChild(confetti);
                        setTimeout(() => confetti.remove(), 3000);
                    }
                }
            }
        }
    </script>
</body>
</html>
